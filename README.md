# 🥇 超星学习通网课助手（支持自定义api）

> 一个功能强大的在线学习平台自动化助手，支持超星学习通、知到智慧树等多个平台。

## ⚠️ 免责声明

**本脚本仅供学习和研究目的使用，并应在24小时内删除。**

- 脚本的使用不应违反任何法律法规及学术道德标准
- 用户必须遵守所有适用的法律法规
- 任何由于使用脚本而引起的违法行为或不当行为，其产生的一切后果由用户自行承担
- 开发者不对用户使用脚本所产生的任何直接或间接后果负责
- 本声明的最终解释权归脚本开发者所有

## 📋 功能特性

### 支持的平台

- ✅ **超星学习通** - 功能完善

### 主要功能

- 🎥 **视频自动观看** - 自动播放视频，跳转下一个任务点
- 📝 **智能答题** - 支持章节测试、作业、考试自动答题
- 🤖 **AI集成** - 支持接入AI模型（OpenAI、智谱AI、通义千问等）
- 📚 **题库支持** - 接入第三方题库，超高覆盖率
- ⚙️ **灵活配置** - 自动提交、自动切换、答题间隔等可配置
- 🎯 **答题策略** - 题库优先或AI优先，双保险机制

## 🚀 安装方法

### 1. 安装浏览器扩展

首先安装用户脚本管理器（选择其中一个）：

| 扩展                                              | Chrome | Edge | Firefox | Safari | Opera |
| ------------------------------------------------- | ------ | ---- | ------- | ------ | ----- |
| [Tampermonkey](https://www.tampermonkey.net/)     | ✅      | ✅    | ✅       | ✅      | ✅     |
| [Violentmonkey](https://violentmonkey.github.io/) | ✅      | ✅    | ✅       | ❌      | ✅     |

**推荐使用 Tampermonkey**，功能最全面，兼容性最好。

### 2. 安装脚本

安装扩展后，访问脚本安装页面：

- 直接从本地安装脚本文件

### 3. 进入目标网站

访问以下任一网站，脚本将自动运行：

- 超星学习通：`*.chaoxing.com`
- 智慧树：`*.zhihuishu.com`
- 其他支持的域名：`*.edu.cn`、`*.nbdlib.cn`等

## 📖 使用说明

### 快速开始

1. **打开学习平台**
   - 进入超星学习通或智慧树网站
   - 登录你的账号

2. **启动脚本**
   - 脚本会自动在页面右上角显示操作面板
   - 默认快捷键：`Ctrl+Alt+L` 显示/隐藏面板

3. **开始答题**
   - 进入章节测试、作业或考试页面
   - 脚本会自动解析题目并开始答题

### 界面说明

脚本面板包含以下标签页：

- **🏠 主页** - 显示实时日志和脚本运行状态
- **📝 答题** - 查看题目和答案列表，配置题库密钥
- **⚙️ 设置** - 配置章节设置、考试设置、答题间隔等
- **🤖 AI模型** - 配置AI模型（API地址、密钥、模型名称等）
- **💬 AI聊天** - 与AI对话（需先配置AI模型）
- **📚 使用说明** - 查看脚本使用教程
- **⚠️ 免责声明** - 查看免责声明

## ⚙️ 配置指南

### 基础配置

#### 1. 章节设置

```
✓ 章节作业自动提交
✓ 是否自动下一章节
□ 只答题，不做其他
```

#### 2. 考试设置

```
✓ 是否自动切换
```

#### 3. 其他参数

```
切换、答题间隔：3秒（范围：3-60秒）
正确率达到多少自动提交：85%（范围：0-100%）
```

#### 4. 快捷键设置

```
隐藏/显示窗口：ctrl+alt+l
```

### 题库配置

1. 点击"答题"标签页
2. 在输入框中填入题库密钥
3. 题库密钥需要从第三方题库服务获取
4. **注意**：题库问题与脚本无关，确定能搜到再获取

### AI模型配置

#### 配置步骤

1. **启用AI模型**

   - 勾选"启用AI模型"开关

2. **选择请求格式**

   - `OpenAI兼容格式`（推荐）- 适用于大多数AI服务
   - `自定义格式` - 适用于特殊API

3. **填写API配置**

   ```
   API地址：https://api.openai.com/v1/chat/completions
   API密钥：sk-xxxxxxxxxxxxxxxx
   模型名称：gpt-3.5-turbo
   温度参数：0.3（0-2之间，越小越严谨）
   超时时间：120秒（10-300秒）
   ```

4. **选择答题优先级**

   - `题库优先`（默认）- 先查题库，失败后使用AI
   - `AI优先` - 先使用AI，失败后查题库

5. **配置系统提示词**（可选）

   ```
   你是一个专业的在线教育答题助手。请根据题目内容，直接给出正确答案...
   ```

#### 支持的AI服务

| AI服务   | API地址示例                                                  | 请求格式     |
| -------- | ------------------------------------------------------------ | ------------ |
| OpenAI   | `https://api.openai.com/v1/chat/completions`                 | OpenAI兼容   |
| 智谱AI   | `https://open.bigmodel.cn/api/paas/v4/chat/completions`      | OpenAI兼容   |
| 通义千问 | `https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions` | OpenAI兼容   |
| 本地模型 | `http://localhost:11434/v1/chat/completions`                 | OpenAI兼容   |
| 其他     | 根据服务提供商文档                                           | 选择合适格式 |

#### 答题策略说明

**题库优先（推荐）**

```
流程：题库 → AI（如果题库失败）
优点：速度快，准确率高（题库已验证）
适用：题库覆盖率高的课程
```

**AI优先**

```
流程：AI → 题库（如果AI失败）
优点：适应性强，可处理新题
适用：题库覆盖率低或需要AI理解的题目
```

## 💡 使用技巧

### 1. 最佳配置建议

**常规课程**（题库覆盖好）：

```
答题优先级：题库优先
AI模型：可选
答题间隔：3秒
自动提交：开启
```

**新课程/小众课程**（题库覆盖差）：

```
答题优先级：AI优先
AI模型：必须配置
答题间隔：5秒
自动提交：建议关闭（先检查答案）
```

### 2. 提高正确率

- 使用多个题库API（如果有）
- 配置AI模型作为后备
- 设置合理的正确率阈值（建议85%以上）
- 重要考试建议先手动检查答案

### 3. 避免封号

- 设置合理的答题间隔（建议3-5秒）
- 不要在深夜或异常时间段大量答题
- 偶尔手动操作，避免被识别为机器人
- 不要在同一账号上过度使用

## 🔧 故障排除

### 常见问题

#### 1. 脚本无法运行

**问题**：页面没有显示脚本面板

**解决方案**：

- 确认已安装Tampermonkey或Violentmonkey
- 检查脚本是否已启用
- 刷新页面重试
- 按快捷键 `Ctrl+Alt+L` 尝试显示面板
- 打开浏览器控制台（F12）查看是否有错误信息

#### 2. 题库无法查询

**问题**：提示"题库查询失败"

**解决方案**：

- 确认题库密钥已正确填写
- 检查题库密钥是否有剩余次数
- 尝试更换其他题库API
- 查看控制台错误信息

#### 3. AI无法回答

**问题**：提示"AI请求失败"或"AI请求超时"

**解决方案**：

- 检查API地址是否正确
- 确认API密钥有效
- 检查模型名称是否正确
- 增加超时时间（默认120秒）
- 检查网络连接
- 查看控制台的详细错误信息

#### 4. 视频无法播放

**问题**：视频停止或无法自动播放

**解决方案**：

- 刷新页面重试
- 检查是否有其他脚本冲突
- 确认浏览器允许自动播放
- 尝试手动点击播放后再启用脚本

#### 5. 答案不正确

**问题**：题库或AI给出的答案错误

**解决方案**：

- 题库答案来自网络收集，可能有错误
- 建议重要考试前先手动检查
- 可以尝试切换答题优先级
- AI答案可以通过调整提示词优化

## 🛠️ 高级功能

### 1. 控制台调试

打开浏览器控制台（F12），可以使用以下命令：

```javascript
// 查看脚本工具函数
console.log(unsafeWindow.xuexitongUtils);

// 查看配置常量
console.log(unsafeWindow.XUEXITONG_CONSTANTS);

// 查看DOM缓存统计
unsafeWindow.xuexitongUtils.domCache.getStats();

// 查看资源统计
unsafeWindow.xuexitongScriptStats();

// 手动清理资源
unsafeWindow.cleanupXuexitongScript();
```

### 2. 自定义配置

如果你懂JavaScript，可以在控制台直接修改配置：

```javascript
// 获取配置存储
const configStore = pinia.getActivePinia()._s.get('configStore');

// 修改配置
configStore.otherParams.params[0].value = 5; // 改为5秒间隔

// 保存配置
GM_setValue('config', JSON.stringify(configStore.$state));
```

## 📦 技术栈

- **Vue 3** - 前端框架
- **Element Plus** - UI组件库
- **Pinia** - 状态管理
- **RxJS** - 响应式编程
- **Typr.js** - 字体解析（用于反爬虫）
- **MD5** - 字体指纹识别

## 🔒 安全说明

### 脚本安全性

✅ **开源透明**

- 所有代码公开，无隐藏功能
- 无数据收集和上报
- 无后门和恶意代码

✅ **本地存储**

- 所有配置（包括API密钥）存储在本地
- 使用 GM_setValue 安全存储
- 不会发送到任何第三方服务器

✅ **最小权限**

- 只请求必要的浏览器权限
- 只在指定域名运行

### 用户隐私保护

**密钥安全**：

- API密钥和题库token仅存储在你的浏览器本地
- 不建议在公共设备上使用
- 使用后可以清除浏览器数据

**数据传输**：

- 题目内容会发送到题库API和AI服务（如果启用）
- 确保你信任这些第三方服务
- 建议使用HTTPS的API

## 🎨 界面预览

```
┌─────────────────────────────────────────┐
│ 🥇 超星学习通网课助手         [-] [×]   │
├─────────────────────────────────────────┤
│ [主页] [答题] [设置] [AI模型] [AI聊天]  │
│                                          │
│  📋 运行日志                             │
│  ├─ 14:30:25 ✓ 脚本已启动               │
│  ├─ 14:30:27 ✓ 成功解析到5个题目        │
│  ├─ 14:30:30 ✓ 第1道题搜索成功          │
│  ├─ 14:30:33 ✓ 第2道题搜索成功          │
│  └─ ...                                  │
│                                          │
└─────────────────────────────────────────┘
```

## ⚡ 性能优化

本脚本已经过多项性能优化：

- ✅ **防抖节流** - 减少频繁的事件触发
- ✅ **DOM缓存** - 避免重复查询，提升90%性能
- ✅ **资源管理** - 自动清理定时器和事件监听器
- ✅ **配置统一** - 集中管理，消除魔法数字
- ✅ **单例模式** - 防止脚本重复加载

## 📚 常见问题 (FAQ)

### Q1: 题库密钥在哪里获取？

**A**: 题库密钥需要从第三方题库服务商获取。脚本本身不提供题库服务，只是接入了第三方题库API。请确认该题库能够搜索到题目后再获取密钥。

### Q2: AI配置支持哪些服务？

**A**: 支持任何兼容OpenAI格式的API，包括：

- OpenAI GPT系列
- 智谱AI（GLM-4等）
- 通义千问
- 本地部署的大模型（如Ollama）
- 其他兼容OpenAI格式的服务

### Q3: 题库优先还是AI优先？

**A**: 建议根据课程选择：

- **题库优先**（默认）：适合常见课程，速度快，准确率高
- **AI优先**：适合新课程或题库覆盖低的课程

### Q4: 为什么有些题目没有答案？

**A**: 可能的原因：

- 题库中没有该题目
- AI无法理解或回答该题目
- 题目格式特殊（如图片题）
- 网络请求失败

**建议**：手动作答，脚本会保存你的答案供下次使用。

### Q5: 脚本会被检测到吗？

**A**: 理论上存在被检测的风险。建议：

- 设置合理的答题间隔（3-5秒）
- 不要过度频繁使用
- 偶尔手动操作
- 重要考试谨慎使用

### Q6: 如何卸载脚本？

**A**: 

1. 打开Tampermonkey管理面板

2. 找到本脚本

3. 点击删除按钮

4. 如需清理数据，可以在控制台执行：

   ```javascript
   GM_deleteValue('config');
   GM_deleteValue('globalConfig');
   ```

## 🐛 反馈与支持

### 问题反馈

如果遇到问题，请提供以下信息：

- 浏览器版本
- 脚本管理器版本
- 脚本版本
- 详细的错误描述
- 控制台错误信息截图

### 反馈渠道

- Greasy Fork 脚本页面反馈区
- GitHub Issues（如果有）

## 👨‍💻 作者

**isMobile** - 脚本开发者 链接：[篡改猴](https://greasyfork.org/zh-CN/users/731749-ismobile)

**yeedencao**-脚本二创

